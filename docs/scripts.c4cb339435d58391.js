var ud,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,a,n,o,s){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof a?e!==a||!s:!a.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?s.call(e,n):s?s.value=n:a.set(e,n),n},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,a,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof a?e!==a||!o:!a.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:a.get(e)},__decorate=this&&this.__decorate||function(e,a,n,o){var i,s=arguments.length,t=s<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)t=Reflect.decorate(e,a,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(t=(s<3?i(t):s>3?i(a,n,t):i(a,n))||t);return s>3&&t&&Object.defineProperty(a,n,t),t};!function(e){let a;var s;let n,o;(s=a=e.UdSlopeDirection||(e.UdSlopeDirection={}))[s.ToLeft=-1]="ToLeft",s[s.None=0]="None",s[s.ToRight=1]="ToRight",function(s){s[s.Static=0]="Static",s[s.Dynamic=1]="Dynamic"}(n=e.UdSegmentAssetTypes||(e.UdSegmentAssetTypes={})),function(s){s.None="",s.Straight="s",s.Left="l",s.Right="r",s.StraightLeft="sl",s.StraightRight="sr",s.LeftRight="lr",s.StraightLeftRight="slr"}(o=e.UdSegmentDirection||(e.UdSegmentDirection={}))}(ud||(ud={})),function(e){e.SCALE={meterToPixelsDefault:40,surfaceBorderWidthDefault:4,meterToPixels:40,surfaceBorderWidth:4},e.PATH=window.UD_PATH||"../out/",e.PATH_ASSETS=e.PATH+"assets/",e.PATH_STYLE=e.PATH_ASSETS+"style.css",e.PATH_MAPS=e.PATH_ASSETS+"maps/",e.getAssetSrc=a=>`${e.PATH_ASSETS}/asset/${a}.svg`,e.getDirectionSrc=(a,n,o)=>o?`${e.PATH_ASSETS}direction/direction-${a?"b":"f"}-${o}-${n}.svg`:`${e.PATH_ASSETS}direction/direction-${a?"b":"f"}-${n}.svg`,e.getPatternSrc=a=>`${e.PATH_ASSETS}pattern/${a}.png`,e.getUiSrc=a=>`${e.PATH_ASSETS}ui/${a}.svg`,e.COLOURS={separator:"black",outline:"black"},e.PATTERNS=["10-1","10","20-1","20","60-1","60","100-1","100","140_1_165000000-1","140_1_165000000","150-1","150","160_1_127255127-1","160_1_127255127","200-1","200","210-1","210","220-1","220","230-1","230-2","230-3","230","240_1_165000165-1","240_1_165000165-2","240_1_165000165-3","240_1_165000165","280-1","280","290-1","290","300-1","300","400","600","660-1","660","661-1","661","680_1_000165041-1","680_1_000165041-2","680_1_000165041-3","680_1_000165041","700-1","700","720-1","720","730-1","730","740-1","740","750_1_165000041-1","750_1_165000041-2","750_1_165000041-3","750_1_165000041","780-1","780","800_1_101101101-1","800_1_101101101","810","820","860","870","880","890","1000","1050","1200","1300","1321","1410","1480","1502","1510","1520","1570_1_165000165-1","1570_1_165000165","1574","1576","1580_1_102102102","1590","1670","Commerce-DEMO","GREEN-CORRADOR-METRO","GREEN-DEMO","lines_45_black_half","lines_45_black_mirror","lines_45_black","lines_45_green_half","lines_45_green_mirror","lines_45_green","lines_45_grey__mirror","lines_45_grey_half","lines_45_grey","lines_45_red_half","lines_45_red_mirror","lines_45_red","METRO_CORE2","Metro-brown3","metro-core","Metro-core2","metro-green","Metro-green1","metro-mix","metro-nd","Metro-prepule3","metro-ring2","metro-roads","Metro-turqis1","Metro-turqis2","Metro-turqis3","metro","mpublic green","NETWORK-DENSITY-METRO","NETWORK-DENSITY-METRO2-1","NETWORK-DENSITY-METRO2","renual","roads","SHATZAP-METRO","SPECIAL-NOTE-METRO","SPECIAL-ZONE-METRO","SPECIAL-ZONE-METRO222","\u05de\u05e2\u05d1\u05e8 \u05d1\u05de\u05e4\u05dc\u05e1 \u05e9\u05d5\u05e0\u05d4 \u05de\u05d8\u05e8\u05d5","\u05de\u05ea\u05d7\u05dd \u05dc\u05d9\u05d1\u05d4 \u05de\u05d8\u05e8\u05d5-1","\u05de\u05ea\u05d7\u05dd \u05dc\u05d9\u05d1\u05d4 \u05de\u05d8\u05e8\u05d5-2","\u05de\u05ea\u05d7\u05dd \u05dc\u05d9\u05d1\u05d4 \u05de\u05d8\u05e8\u05d5-3","\u05de\u05ea\u05d7\u05dd \u05dc\u05d9\u05d1\u05d4 \u05de\u05d8\u05e8\u05d5"],e.SEGMENT_TYPES={bike:{title:"Bike lane",type:e.UdSegmentAssetTypes.Static,width:.8,directionType:"bike",hideUiOptions:{direction:!0,slope:!0}},bus:{title:"Bus lane",type:e.UdSegmentAssetTypes.Static,width:3.6,hideUiOptions:{direction:!0}},drive:{title:"Drive lane",defaults:{direction:e.UdSegmentDirection.Straight},type:e.UdSegmentAssetTypes.Static,width:3.6},lamp:{title:"Lamp",type:e.UdSegmentAssetTypes.Static,width:1.2,noDirection:!0,hideUiOptions:{slope:!0}},lightrail:{title:"Light rail",directionType:"lightrail",type:e.UdSegmentAssetTypes.Static,width:3,hideUiOptions:{direction:!0,slope:!0}},streetcar:{title:"Streetcar",directionType:"streetcar",type:e.UdSegmentAssetTypes.Static,width:3.2,hideUiOptions:{direction:!0,slope:!0}},"plantingstrip-flower":{title:"Planting strip - Flower",type:e.UdSegmentAssetTypes.Dynamic,noDirection:!0,objectWidth:1,subImage:"plantingstrip-grass",hideUiOptions:{slope:!0}},"plantingstrip-grass":{title:"Planting strip - Grass",type:e.UdSegmentAssetTypes.Dynamic,noDirection:!0,hideUiOptions:{slope:!0}},sidewalk:{title:"Sidewalk",type:e.UdSegmentAssetTypes.Dynamic,objectWidth:1.4,noDirection:!0,hideUiOptions:{slope:!0}},transitshelter:{title:"Transit shelter",type:e.UdSegmentAssetTypes.Static,width:2.7,hideUiOptions:{direction:!0,slope:!0}},tree:{title:"Tree",type:e.UdSegmentAssetTypes.Static,width:2.7,noDirection:!0,hideUiOptions:{slope:!0}}}}(ud||(ud={})),function(e){e.defineElement=(n,o)=>{const s="ud-"+n;customElements.get(s)||customElements.define(s,o)};const a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("href",e.PATH_STYLE),document.head.appendChild(a)}(ud||(ud={})),(ud||(ud={})).CubicSpline=class a{constructor(o,s){this.xs=o,this.ys=s,this.ks=this.getNaturalKs(new Float64Array(this.xs.length))}getNaturalKs(o){const s=this.xs.length-1,t=this.zerosMat(s+1,s+2);for(let i=1;i<s;i++)t[i][i-1]=1/(this.xs[i]-this.xs[i-1]),t[i][i]=2*(1/(this.xs[i]-this.xs[i-1])+1/(this.xs[i+1]-this.xs[i])),t[i][i+1]=1/(this.xs[i+1]-this.xs[i]),t[i][s+1]=3*((this.ys[i]-this.ys[i-1])/((this.xs[i]-this.xs[i-1])*(this.xs[i]-this.xs[i-1]))+(this.ys[i+1]-this.ys[i])/((this.xs[i+1]-this.xs[i])*(this.xs[i+1]-this.xs[i])));return t[0][0]=2/(this.xs[1]-this.xs[0]),t[0][1]=1/(this.xs[1]-this.xs[0]),t[0][s+1]=3*(this.ys[1]-this.ys[0])/((this.xs[1]-this.xs[0])*(this.xs[1]-this.xs[0])),t[s][s-1]=1/(this.xs[s]-this.xs[s-1]),t[s][s]=2/(this.xs[s]-this.xs[s-1]),t[s][s+1]=3*(this.ys[s]-this.ys[s-1])/((this.xs[s]-this.xs[s-1])*(this.xs[s]-this.xs[s-1])),this.solve(t,o)}getIndexBefore(o){let s=0,t=this.xs.length,i=0;for(;s<t;)i=Math.floor((s+t)/2),this.xs[i]<o&&i!==s?s=i:t=this.xs[i]>=o&&i!==t?i:s;return s===this.xs.length-1?this.xs.length-1:s+1}at(o){let s=this.getIndexBefore(o);const t=(o-this.xs[s-1])/(this.xs[s]-this.xs[s-1]);return(1-t)*this.ys[s-1]+t*this.ys[s]+t*(1-t)*((this.ks[s-1]*(this.xs[s]-this.xs[s-1])-(this.ys[s]-this.ys[s-1]))*(1-t)+(-this.ks[s]*(this.xs[s]-this.xs[s-1])+(this.ys[s]-this.ys[s-1]))*t)}solve(o,s){const t=o.length;let i=0,c=0;for(;i<t&&c<=t;){let f=0,g=-1/0;for(let l=i;l<t;l++){const r=Math.abs(o[l][c]);r>g&&(f=l,g=r)}if(0===o[f][c])c++;else{this.swapRows(o,i,f);for(let l=i+1;l<t;l++){const r=o[l][c]/o[i][c];o[l][c]=0;for(let h=c+1;h<=t;h++)o[l][h]-=o[i][h]*r}i++,c++}}for(let f=t-1;f>=0;f--){var m=0;o[f][f]&&(m=o[f][t]/o[f][f]),s[f]=m;for(let g=f-1;g>=0;g--)o[g][t]-=o[g][f]*m,o[g][f]=0}return s}zerosMat(o,s){const t=[];for(let i=0;i<o;i++)t.push(new Float64Array(s));return t}swapRows(o,s,t){let i=o[s];o[s]=o[t],o[t]=i}},function(e){var a,n,o,s;class t{constructor(c,m){a.set(this,void 0),n.set(this,void 0),o.set(this,void 0),s.set(this,void 0),this.startListening=f=>{__classPrivateFieldSet(this,o,f.clientX,"f"),__classPrivateFieldSet(this,s,f.clientY,"f"),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),f.stopPropagation()},this.stopListening=()=>{document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)},this.onMouseMove=f=>{(Math.abs(__classPrivateFieldGet(this,o,"f")-f.clientX)>t.MoveThresold||Math.abs(__classPrivateFieldGet(this,s,"f")-f.clientY)>t.MoveThresold)&&(__classPrivateFieldGet(this,a,"f").dispatchEvent(new CustomEvent(__classPrivateFieldGet(this,n,"f")+"dragstart",{bubbles:!0,detail:{screenX:f.screenX,screenY:f.screenY}})),this.stopListening())},this.onMouseUp=()=>{this.stopListening()},__classPrivateFieldSet(this,a,c,"f"),__classPrivateFieldSet(this,n,m,"f"),c.addEventListener("mousedown",this.startListening)}}a=new WeakMap,n=new WeakMap,o=new WeakMap,s=new WeakMap,t.MoveThresold=2,e.DragEvents=t}(ud||(ud={})),function(e){let a;!function(n){function m(r,h,d){return d===e.UdSlopeDirection.None||0===h?0:Math.min(h,r)}n.inRange=function o(r,h){return h<r[0]?r[0]:h>r[1]?r[1]:h},n.inEnum=function s(r,h,d){return r[h]?h:d},n.debounce=function t(r,h=250){let d;return(...p)=>{clearTimeout(d),d=setTimeout(()=>{r.apply(this,p)},h)}},n.debounceWithClear=function i(r,h=250){let d;const p=(...v)=>{clearTimeout(d),d=setTimeout(()=>{r.apply(this,v)},h)};return p.clear=()=>clearTimeout(d),p},n.calculateSlope=function c(r,h,d){const p=r.toFixed(),v=(h+5).toFixed(),u=h.toFixed(),b=(h+10).toFixed(),E=Math.atan(h/r)+Math.PI/2,y=5*Math.sin(E);return{width:p,height:v,path:d?`M0,${u} L${p},0 V${b} H0 Z`:`M${p},${u} L0,0 V${b} H${p} Z`,viewBox:`0 0 ${p} ${v}`,transform:`translate(${(Math.cos(E)*(d?-5:5)).toFixed(3)} ${y.toFixed(3)})`}},n.calculateSlopeHeight=m,n.calculateElevation=function f(r,h,d){return r-m(r,h,d)},n.fitRange=function g(r,h,d){return d/r*h},n.fitRangeWithOffset=function l(r,h,d,p,v){return(v-r)/h*p+d}}(a=e.Utils||(e.Utils={}))}(ud||(ud={})),function(e){let a;var t;(t=a||(a={}))[t.String=0]="String",t[t.Number=1]="Number",t[t.Boolean=2]="Boolean",e.attributeProperty=function s(t){return(i,c)=>{const m=i.constructor[e.AttributePropertiesSymbol];m.has(i.constructor)||m.set(i.constructor,[]),m.get(i.constructor).push({propertyKey:c,attributeKey:c.toLowerCase()});const f=new WeakMap,g=new WeakMap;Object.defineProperty(i,c,{get(){return f.get(this)},set(l){g.get(this)||g.set(this,function n(t){switch(typeof t){case"number":return a.Number;case"boolean":return a.Boolean;default:return a.String}}(l));let h=function o(t,i){switch(i){case a.Number:return+t;case a.Boolean:return!1!==t&&null!==t;default:return t}}(l,g.get(this));t&&(h=t(h,f.get(this)));const d=f.get(this);f.set(this,h),this.isConnected&&this.propertyChangedCallback(c,d,h)}})}}}(ud||(ud={})),function(e){var a;e.AttributePropertiesSymbol=Symbol();class o extends HTMLElement{constructor(){super(...arguments),a.set(this,!1)}static get observedAttributes(){return this[e.AttributePropertiesSymbol].has(this)?this[e.AttributePropertiesSymbol].get(this).map(t=>t.attributeKey):[]}attributeChangedCallback(t,i,c){const m=this.constructor[e.AttributePropertiesSymbol].get(this.constructor).find(f=>f.attributeKey===t);if(m){if(m.observeOnly)return void this.propertyChanged(m.propertyKey);this[m.propertyKey]=c}}propertyChanged(t,i,c){!this.isConnected||this.propertyChangedCallback.call(this,t,i,c)}propertyChangedCallback(t,i,c){}connectedCallback(){!this.isConnected||this.renderElement()}adoptedCallback(){console.log("adopted")}onScaleChange(t){this.shadowRoot.innerHTML="";const i=Math.round(e.SCALE.meterToPixelsDefault*(t.detail/100));document.documentElement.style.setProperty("--meter-to-px",i+"px"),e.SCALE.meterToPixels=i;const c=Math.round(e.SCALE.surfaceBorderWidthDefault*(t.detail/100));document.documentElement.style.setProperty("--surface-border-width",c+"px"),e.SCALE.surfaceBorderWidth=c,__classPrivateFieldSet(this,a,!1,"f"),this.renderElement()}renderElement(){if(__classPrivateFieldGet(this,a,"f"))return;this.shadowRoot||this.attachShadow({mode:"open"});const t=e.ce("link",{rel:"stylesheet",href:e.PATH_STYLE});this.shadowRoot.appendChild(t),this.render(),document.addEventListener("scalechange",this.onScaleChange.bind(this)),__classPrivateFieldSet(this,a,!0,"f")}render(){}}a=new WeakMap,o[e.AttributePropertiesSymbol]=new WeakMap,e.BaseElement=o}(ud||(ud={})),function(e){e.ce=(a,n,...o)=>{const s=n?.svg?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a);return n&&(n.svg?(delete n.svg,Object.entries(n).forEach(([t,i])=>{s.setAttribute(t,i)})):Object.entries(n).forEach(([t,i])=>{"object"!=typeof i?s[t]=i:Object.entries(i).forEach(([c,m])=>s[t][c]=m)})),o.forEach(t=>{s.appendChild("string"==typeof t?document.createTextNode(t):t)}),s},e.cr=()=>({element:null}),e.ceRef=(a,n,o,...s)=>{const t=e.ce(a,o,...s);return n.element=t,t},e.crArr=()=>[],e.ceArrayRef=(a,n,o,...s)=>{const t=e.ce(a,o,...s);return n.push({element:t}),t}}(ud||(ud={})),function(e){e.observeAttribute=function a(n,o,s){e.BaseElement[e.AttributePropertiesSymbol].get(n).push({propertyKey:o,attributeKey:s??o,observeOnly:!0})}}(ud||(ud={})),function(e){var a,n,o;a=new WeakMap,n=new WeakMap,o=new WeakMap,e.UiBaseToolElement=class s extends e.BaseElement{constructor(i){super(),a.set(this,void 0),n.set(this,!1),o.set(this,!1),this.show=(c,m,f)=>{if(__classPrivateFieldGet(this,o,"f")&&c==this.activeElement)return;this.hide.clear(),this.activeElement&&this.activeElement.toggleFocus(!1),this.activeElement=c,this.activeElement.toggleFocus(!0),this.showTool();let g=c.offsetLeft+c.offsetWidth/2+m;const l=g-__classPrivateFieldGet(this,a,"f")-m,r=f-(g+__classPrivateFieldGet(this,a,"f"))+m;l<0?g+=-l:r<0&&(g+=r),this.style.left=g+"px",this.style.display="",__classPrivateFieldSet(this,o,!0,"f")},this.hide=e.Utils.debounceWithClear(()=>{var c;__classPrivateFieldGet(this,n,"f")||(this.style.display="none",null===(c=this.activeElement)||void 0===c||c.toggleFocus(!1),__classPrivateFieldSet(this,o,!1,"f"))}),__classPrivateFieldSet(this,a,i/2+10,"f")}forceHide(){var i;this.hide.clear(),this.style.display="none",null===(i=this.activeElement)||void 0===i||i.toggleFocus(!1),__classPrivateFieldSet(this,o,!1,"f")}render(){this.renderTool(),this.shadowRoot.querySelector("div").addEventListener("mouseenter",()=>__classPrivateFieldSet(this,n,!0,"f")),this.shadowRoot.querySelector("div").addEventListener("mouseleave",()=>__classPrivateFieldSet(this,n,!1,"f"))}renderTool(){}showTool(){}}}(ud||(ud={})),function(e){var a,n,o,s,t,i,c;let m;var g;(g=m||(m={}))[g.Before=-2]="Before",g[g.InsideBefore=-1]="InsideBefore",g[g.Inside=0]="Inside",g[g.InsideAfter=1]="InsideAfter",g[g.After=2]="After";class f extends e.BaseElement{constructor(){super(...arguments),a.set(this,void 0),n.set(this,void 0),o.set(this,0),this.elevationGrid=!1,this.elevation=0,this.outline=!1,this.separator=!1,this.hideSurface=!1,this.hideElevationProfile=!1,this.mirrored=!1,s.set(this,void 0),this.onStreetChange=e.Utils.debounce(l=>{switch(l.detail){case"width":this.updateContentWidth(),__classPrivateFieldGet(this,a,"f").update();break;case"elevation":case"slope":__classPrivateFieldGet(this,a,"f").update();break;case"segmentsWidth":this.onSlotChange()}},50),this.onSegmentChange=e.Utils.debounce(l=>{switch(l.detail){case"width":this.updateContentWidth(),__classPrivateFieldGet(this,a,"f").update();break;case"elevation":case"slope":__classPrivateFieldGet(this,a,"f").update()}},50),this.onSlotChange=e.Utils.debounce(()=>{this.updateContentWidth(),__classPrivateFieldGet(this,a,"f").update()},50),this.onElementFocus=l=>{var r;if(null!==(r=__classPrivateFieldGet(this,t,"f"))&&void 0!==r&&r.element)return;const h=l.target instanceof e.UdStreet;let d=h?__classPrivateFieldGet(this,i,"f").streetUi:__classPrivateFieldGet(this,i,"f").segmentUi,p=h?__classPrivateFieldGet(this,i,"f").segmentUi:__classPrivateFieldGet(this,i,"f").streetUi;d.element.show(l.target,__classPrivateFieldGet(this,i,"f").content.element.offsetLeft,__classPrivateFieldGet(this,i,"f").content.element.offsetWidth),p.element.forceHide()},this.onElementBlur=l=>{var r;null!==(r=__classPrivateFieldGet(this,t,"f"))&&void 0!==r&&r.element||(__classPrivateFieldGet(this,i,"f").streetUi.element.hide(),__classPrivateFieldGet(this,i,"f").segmentUi.element.hide())},this.onContentMouseLeave=()=>{__classPrivateFieldGet(this,i,"f").streetUi.element.hide(),__classPrivateFieldGet(this,i,"f").segmentUi.element.hide()},t.set(this,void 0),this.onStreetDragStart=l=>{__classPrivateFieldSet(this,t,{element:l.target,mouseX:l.detail.screenX},"f"),this.starDragging()},this.onSegmentDragStart=l=>{__classPrivateFieldSet(this,t,{element:l.target,mouseX:l.detail.screenX},"f"),this.starDragging()},this.starDragging=()=>{__classPrivateFieldGet(this,i,"f").streetUi.element.hide(),__classPrivateFieldGet(this,i,"f").segmentUi.element.hide(),__classPrivateFieldGet(this,t,"f").element.toggleMoving(!0),document.addEventListener("mouseup",this.stopDragging),__classPrivateFieldGet(this,i,"f").content.element.addEventListener("mousemove",this.dragging)},this.dragging=l=>{let r=l.target;if(r===__classPrivateFieldGet(this,t,"f").element)return;const h=r.getBoundingClientRect(),d=(l.clientX-h.left)/h.width*100;let p=m.After;switch(r instanceof e.UdStreet?(d<=25?p=m.Before:d<75&&(p=m.Inside),r.children.length&&p===m.Inside&&(p=d<=50?m.InsideBefore:m.InsideAfter)):d<=50&&(p=m.Before),p){case m.After:if(r.nextElementSibling===__classPrivateFieldGet(this,t,"f").element)return;r.insertAdjacentElement("afterend",__classPrivateFieldGet(this,t,"f").element);break;case m.Before:if(r.previousElementSibling===__classPrivateFieldGet(this,t,"f").element)return;r.insertAdjacentElement("beforebegin",__classPrivateFieldGet(this,t,"f").element);break;case m.Inside:case m.InsideAfter:if(r.lastElementChild===__classPrivateFieldGet(this,t,"f").element)return;r.append(__classPrivateFieldGet(this,t,"f").element);break;case m.InsideBefore:if(r.firstElementChild===__classPrivateFieldGet(this,t,"f").element)return;r.prepend(__classPrivateFieldGet(this,t,"f").element)}__classPrivateFieldGet(this,t,"f").element.slot=__classPrivateFieldGet(this,t,"f").element.parentElement instanceof e.UdStreet?"street":"canvas"},this.stopDragging=()=>{__classPrivateFieldGet(this,i,"f").content.element.removeEventListener("mousemove",this.dragging),document.removeEventListener("mouseup",this.stopDragging),__classPrivateFieldGet(this,t,"f").element.toggleMoving(!1),__classPrivateFieldGet(this,t,"f").element=void 0},i.set(this,{root:e.cr(),content:e.cr(),labels:e.cr(),elevationGrid:e.cr(),canvas:e.cr(),streetUi:e.cr(),segmentUi:e.cr()}),c.set(this,{height:700,bottomMargin:100,groundHeight:1})}get contentWidth(){return __classPrivateFieldGet(this,o,"f")}mirror(){__classPrivateFieldGet(this,i,"f").root.element.style.opacity="0";const l=[];for(const r of this.children)if(r instanceof e.UdStreet){l.push(r);for(const h of r.children)h instanceof e.UdSegment&&l.push(h);r.append(...Array.from(r.children).reverse())}for(const r of this.children)r instanceof e.UdSegment&&l.push(r);this.append(...Array.from(this.children).reverse());for(const r of l)r.slopeDirection*=-1,r instanceof e.UdSegment&&(r.backward=!r.backward);setTimeout(()=>{__classPrivateFieldGet(this,i,"f").root.element.style.opacity="1"},100),this.mirrored=!this.mirrored}get elevationProfileData(){return __classPrivateFieldGet(this,s,"f")}setElevationProfile(l,r){__classPrivateFieldSet(this,s,{ys:l,distance:r,cubicSpline:new e.CubicSpline(Array(l.length).fill(void 0).map((h,d)=>d),l)},"f"),__classPrivateFieldGet(this,a,"f").update()}getJSON(){return __classPrivateFieldGet(this,n,"f").getJSON()}loadJSON(l){__classPrivateFieldGet(this,n,"f").loadJSON(l)}propertyChangedCallback(l){switch(l){case"elevationGrid":this.updateElevationGrid();case"elevation":this.updateElevationLabels();case"outline":__classPrivateFieldGet(this,a,"f").update();case"separator":__classPrivateFieldGet(this,a,"f").update();case"hideSurface":this.updateHideSurface();case"hideElevationProfile":__classPrivateFieldGet(this,a,"f").update()}}updateElevationLabels(){const l=Math.ceil(this.elevation),r=Math.round(this.elevation%1*e.SCALE.meterToPixels),h=Math.ceil((__classPrivateFieldGet(this,c,"f").height-__classPrivateFieldGet(this,c,"f").bottomMargin-__classPrivateFieldGet(this,c,"f").groundHeight*e.SCALE.meterToPixels)/e.SCALE.meterToPixels),d=__classPrivateFieldGet(this,i,"f").labels.element.children[0].children.length-h;if(d)for(let p=0;p<Math.abs(d);p++)d>0?__classPrivateFieldGet(this,i,"f").labels.element.children[0].lastChild.remove():__classPrivateFieldGet(this,i,"f").labels.element.children[0].append(e.ce("div",{className:"evl__label"}));for(let p=0;p<h;p++)__classPrivateFieldGet(this,i,"f").labels.element.children[0].children[p].innerText=(l+h-p-1).toString();__classPrivateFieldGet(this,i,"f").labels.element.children[0].style.marginBottom=__classPrivateFieldGet(this,i,"f").labels.element.children[1].style.marginBottom=__classPrivateFieldGet(this,i,"f").elevationGrid.element.style.marginBottom=r+"px"}updateElevationGrid(){__classPrivateFieldGet(this,i,"f").root.element.classList.toggle("sc--elevation-grid",this.elevationGrid)}updateContentWidth(){__classPrivateFieldSet(this,o,0,"f");for(const l of this.children)(l instanceof e.UdSegment||l instanceof e.UdStreet)&&__classPrivateFieldSet(this,o,__classPrivateFieldGet(this,o,"f")+l.width,"f");this.dispatchEvent(new CustomEvent("canvaschange",{detail:"contentWidth"}))}updateHideSurface(){this.classList.toggle("--hide-surface",this.hideSurface)}addSegment(l){var r;const h=e.ce("ud-segment",{type:l});h.slot="canvas";for(const d in null===(r=e.SEGMENT_TYPES[l])||void 0===r?void 0:r.defaults)h[d]=e.SEGMENT_TYPES[l].defaults[d];this.appendChild(h),__classPrivateFieldSet(this,t,{element:h,mouseX:0},"f"),this.starDragging()}addStreet(){const l=e.ce("ud-street");l.slot="canvas",this.appendChild(l)}render(){const l=e.ceRef("div",__classPrivateFieldGet(this,i,"f").root,{className:"canvas"},e.ceRef("div",__classPrivateFieldGet(this,i,"f").labels,{className:"cn__labels"},e.ce("div",{className:"elevation-labels"}),e.ce("div",{className:"elevation-grid elevation-grid--labels"})),e.ceRef("div",__classPrivateFieldGet(this,i,"f").content,{className:"cn__content cn__content--color"},e.ceRef("div",__classPrivateFieldGet(this,i,"f").elevationGrid,{className:"elevation-grid"}),e.ce("slot",{name:"canvas"})),e.ce("div",{className:"cn__content"},e.ceRef("canvas",__classPrivateFieldGet(this,i,"f").canvas,{className:"cn__canvas"}),e.ce("div",{className:"cn__scale"},e.ce("div",{className:"cn__scale__label"},"2m"),e.ce("div",{className:"cn__scale__measure"}))),e.ceRef("ud-street-ui",__classPrivateFieldGet(this,i,"f").streetUi),e.ceRef("ud-segment-ui",__classPrivateFieldGet(this,i,"f").segmentUi));this.shadowRoot.addEventListener("streetchange",this.onStreetChange),this.shadowRoot.addEventListener("segmentchange",this.onSegmentChange),this.shadowRoot.addEventListener("slotchange",this.onSlotChange),this.shadowRoot.addEventListener("segmentfocus",this.onElementFocus),this.shadowRoot.addEventListener("segmentblur",this.onElementBlur),this.shadowRoot.addEventListener("streetfocus",this.onElementFocus),this.shadowRoot.addEventListener("streetblur",this.onElementBlur),this.shadowRoot.addEventListener("streetdragstart",this.onStreetDragStart),this.shadowRoot.addEventListener("segmentdragstart",this.onSegmentDragStart),__classPrivateFieldGet(this,i,"f").content.element.addEventListener("mouseleave",this.onContentMouseLeave);const r=e.ce("ud-canvas-ui");r.addEventListener("addsegment",h=>this.addSegment(h.detail.key)),r.addEventListener("addstreet",h=>this.addStreet()),this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(l),__classPrivateFieldSet(this,a,new e.UdCanvasDrawings(this,__classPrivateFieldGet(this,i,"f").canvas.element),"f"),__classPrivateFieldSet(this,n,new e.UdCanvasJSON(this,__classPrivateFieldGet(this,i,"f").canvas.element),"f"),this.updateElevationGrid(),this.updateElevationLabels(),__classPrivateFieldGet(this,a,"f").update(),this.updateHideSurface()}}a=new WeakMap,n=new WeakMap,o=new WeakMap,s=new WeakMap,t=new WeakMap,i=new WeakMap,c=new WeakMap,__decorate([e.attributeProperty()],f.prototype,"elevationGrid",void 0),__decorate([e.attributeProperty()],f.prototype,"elevation",void 0),__decorate([e.attributeProperty()],f.prototype,"outline",void 0),__decorate([e.attributeProperty()],f.prototype,"separator",void 0),__decorate([e.attributeProperty()],f.prototype,"hideSurface",void 0),__decorate([e.attributeProperty()],f.prototype,"hideElevationProfile",void 0),e.UdCanvas=f,e.defineElement("canvas",f)}(ud||(ud={})),function(e){var a,n;class o extends e.BaseElement{constructor(){super(...arguments),a.set(this,void 0),this.width=3,this.elevation=0,this.slopeDirection=e.UdSlopeDirection.None,this.slopeHeight=0,this.backward=!1,this.toggleFocus=t=>{__classPrivateFieldGet(this,n,"f").root.element.classList.toggle("el-focus",t)},this.toggleMoving=t=>{__classPrivateFieldGet(this,n,"f").root.element.classList.toggle("el-moving",t)},n.set(this,{root:e.cr(),surface:e.cr(),slope:e.cr(),base:e.cr(),asset:e.cr(),assetImg:e.cr(),assetDiv:e.cr(),assetDivSub:e.cr(),directionImg:e.cr(),widthText:e.cr()})}propertyChangedCallback(t,i,c){switch(t){case"width":this.updateWidth(),this.updateSlope(),this.dispatchEvent(new CustomEvent("segmentchange",{detail:t,bubbles:!0}));break;case"elevation":this.updateElevation(),this.updateSlope(),this.dispatchEvent(new CustomEvent("segmentchange",{detail:t,bubbles:!0}));break;case"slopeHeight":case"slopeDirection":this.updateSlope(),this.updateElevation(),this.dispatchEvent(new CustomEvent("segmentchange",{detail:"slope",bubbles:!0}));break;case"color":this.updateColor(i,c),this.dispatchEvent(new CustomEvent("segmentchange",{detail:t,bubbles:!0}));break;case"pattern":this.updatePattern(),this.dispatchEvent(new CustomEvent("segmentchange",{detail:t,bubbles:!0}));break;case"slot":this.updateOnCanvas();break;case"type":this.updateType(),this.dispatchEvent(new CustomEvent("segmentchange",{detail:t,bubbles:!0}));break;case"direction":case"arrow":this.updateDirection(),this.dispatchEvent(new CustomEvent("segmentchange",{detail:t,bubbles:!0}));break;case"backward":this.updateType(),this.updateDirection(),this.dispatchEvent(new CustomEvent("segmentchange",{detail:t,bubbles:!0}))}}updateText(){let t=this.width.toFixed(1)+"m";this.slopeDirection!==e.UdSlopeDirection.None&&this.slopeHeight>0&&this.elevation&&(t+=" "+Math.round(e.Utils.calculateSlopeHeight(this.elevation,this.slopeHeight,this.slopeDirection)/this.width*100)+"%"),__classPrivateFieldGet(this,n,"f").widthText.element.innerText=t}updateWidth(){__classPrivateFieldGet(this,n,"f").root.element.style.width=this.width*e.SCALE.meterToPixels+"px",this.updateText(),this.updateGraphicsWidth()}updateElevation(){__classPrivateFieldGet(this,n,"f").base.element.style.height=e.Utils.calculateElevation(this.elevation,this.slopeHeight,this.slopeDirection)*e.SCALE.meterToPixels+"px"}updateColor(t,i){t&&__classPrivateFieldGet(this,n,"f").surface.element.classList.remove("color-"+t),i&&__classPrivateFieldGet(this,n,"f").surface.element.classList.add("color-"+i)}updatePattern(){const t=this.pattern?`url(${e.getPatternSrc(this.pattern)})`:"none";__classPrivateFieldGet(this,n,"f").slope.element.style.backgroundImage=t,__classPrivateFieldGet(this,n,"f").base.element.style.backgroundImage=t}updateSlope(){if(this.slopeDirection===e.UdSlopeDirection.None||0===this.elevation)return void(__classPrivateFieldGet(this,n,"f").slope.element.style.display="none");__classPrivateFieldGet(this,n,"f").slope.element.style.display="";const i=(this.width*e.SCALE.meterToPixels).toFixed(),m=(e.Utils.calculateSlopeHeight(this.elevation,this.slopeHeight,this.slopeDirection)*e.SCALE.meterToPixels).toFixed(),f=this.slopeDirection===e.UdSlopeDirection.ToRight?`M0,${m} L${i},0 V${m} H0 Z`:`M${i},${m} L0,0 V${m} H${i} Z`;__classPrivateFieldGet(this,n,"f").slope.element.style.height=m+"px",__classPrivateFieldGet(this,n,"f").slope.element.style.width=i+"px",__classPrivateFieldGet(this,n,"f").slope.element.style.clipPath=`path("${f}")`,this.updateText()}updateOnCanvas(){__classPrivateFieldGet(this,n,"f").root.element.classList.toggle("se--canvas","canvas"===this.slot)}updateType(){var t;if(this.type&&e.SEGMENT_TYPES[this.type])if(__classPrivateFieldSet(this,a,e.SEGMENT_TYPES[this.type],"f"),__classPrivateFieldGet(this,a,"f").type===e.UdSegmentAssetTypes.Dynamic)__classPrivateFieldGet(this,n,"f").assetDiv.element.style.display="",__classPrivateFieldGet(this,n,"f").assetDivSub.element.style.display=__classPrivateFieldGet(this,a,"f").subImage?"":"none",__classPrivateFieldGet(this,a,"f").subImage?(__classPrivateFieldGet(this,n,"f").assetDivSub.element.className="asset-"+this.type,__classPrivateFieldGet(this,n,"f").assetDiv.element.className="asset-"+__classPrivateFieldGet(this,a,"f").subImage):__classPrivateFieldGet(this,n,"f").assetDiv.element.className="asset-"+this.type,this.updateGraphicsWidth();else{__classPrivateFieldGet(this,n,"f").assetImg.element.style.display="";const i=null!==(t=__classPrivateFieldGet(this,a,"f"))&&void 0!==t&&t.noDirection?this.type:this.type+"-"+(this.backward?"b":"f");__classPrivateFieldGet(this,n,"f").assetImg.element.src=e.getAssetSrc(i),__classPrivateFieldGet(this,n,"f").assetImg.element.width=__classPrivateFieldGet(this,a,"f").width*e.SCALE.meterToPixels}else __classPrivateFieldGet(this,n,"f").assetImg.element.style.display="none",__classPrivateFieldGet(this,n,"f").assetDiv.element.style.display="none"}updateGraphicsWidth(){if(!__classPrivateFieldGet(this,a,"f")||__classPrivateFieldGet(this,a,"f").type!==e.UdSegmentAssetTypes.Dynamic)return;const t=__classPrivateFieldGet(this,a,"f").objectWidth?Math.floor(this.width/__classPrivateFieldGet(this,a,"f").objectWidth)*__classPrivateFieldGet(this,a,"f").objectWidth*e.SCALE.meterToPixels+"px":"100%";__classPrivateFieldGet(this,a,"f").subImage&&(__classPrivateFieldGet(this,n,"f").assetDivSub.element.style.width=t)}updateDirection(){var t;this.direction?(__classPrivateFieldGet(this,n,"f").directionImg.element.style.display="",__classPrivateFieldGet(this,n,"f").directionImg.element.src=e.getDirectionSrc(this.backward,this.direction,null===(t=e.SEGMENT_TYPES[this.type])||void 0===t?void 0:t.directionType)):__classPrivateFieldGet(this,n,"f").directionImg.element.style.display="none"}render(){const t=e.ceRef("div",__classPrivateFieldGet(this,n,"f").root,{className:"segment"},e.ce("div",{className:"se__content"},e.ceRef("div",__classPrivateFieldGet(this,n,"f").asset,{className:"asset"},e.ceRef("img",__classPrivateFieldGet(this,n,"f").assetImg,{style:{display:"none"}}),e.ceRef("div",__classPrivateFieldGet(this,n,"f").assetDiv,{style:{display:"none"}},e.ceRef("div",__classPrivateFieldGet(this,n,"f").assetDivSub,{style:{display:"none"}})))),e.ceRef("div",__classPrivateFieldGet(this,n,"f").surface,{className:"surface"},e.ceRef("div",__classPrivateFieldGet(this,n,"f").slope,{className:"sr__slope",part:"slope",style:{display:"none"}}),e.ceRef("div",__classPrivateFieldGet(this,n,"f").base,{className:"sr__ground",part:"ground"},e.ceRef("img",__classPrivateFieldGet(this,n,"f").directionImg,{className:"se__direction"})),e.ce("div",{className:"sr__scale"},e.ce("div",{className:"width-grid"}),e.ceRef("div",__classPrivateFieldGet(this,n,"f").widthText,{className:"width-display"}))));this.updateWidth(),this.updateSlope(),this.updateElevation(),this.updateColor(void 0,this.color),this.updatePattern(),this.updateOnCanvas(),this.updateType(),this.updateDirection(),t.addEventListener("mouseenter",()=>this.dispatchEvent(new CustomEvent("segmentfocus",{bubbles:!0}))),t.addEventListener("mouseleave",()=>this.dispatchEvent(new CustomEvent("segmentblur",{bubbles:!0}))),new e.DragEvents(this,"segment"),this.shadowRoot.appendChild(t)}}a=new WeakMap,n=new WeakMap,__decorate([e.attributeProperty()],o.prototype,"width",void 0),__decorate([e.attributeProperty(e.Utils.inRange.bind(null,[0,10]))],o.prototype,"elevation",void 0),__decorate([e.attributeProperty(e.Utils.inEnum.bind(null,e.UdSlopeDirection))],o.prototype,"slopeDirection",void 0),__decorate([e.attributeProperty(e.Utils.inRange.bind(null,[0,10]))],o.prototype,"slopeHeight",void 0),__decorate([e.attributeProperty()],o.prototype,"color",void 0),__decorate([e.attributeProperty()],o.prototype,"pattern",void 0),__decorate([e.attributeProperty()],o.prototype,"type",void 0),__decorate([e.attributeProperty()],o.prototype,"backward",void 0),__decorate([e.attributeProperty()],o.prototype,"direction",void 0),e.UdSegment=o,e.observeAttribute(o,"slot"),e.defineElement("segment",o)}(ud||(ud={})),function(e){var a,n;class o extends e.BaseElement{constructor(){super(...arguments),this.title="Street",this.width=12,a.set(this,0),this.elevation=0,this.slopeDirection=e.UdSlopeDirection.None,this.slopeHeight=0,this.toggleFocus=t=>{__classPrivateFieldGet(this,n,"f").root.element.classList.toggle("el-focus",t)},this.toggleMoving=t=>{__classPrivateFieldGet(this,n,"f").root.element.classList.toggle("el-moving",t)},n.set(this,{root:e.cr(),title:e.cr(),slope:e.cr(),base:e.cr(),widthText:e.cr()})}get segmentsWidth(){return __classPrivateFieldGet(this,a,"f")}updateSegmentsWidth(){__classPrivateFieldSet(this,a,0,"f");for(const t of this.children)t instanceof e.UdSegment&&__classPrivateFieldSet(this,a,__classPrivateFieldGet(this,a,"f")+t.width,"f");this.dispatchEvent(new CustomEvent("streetchange",{detail:"segmentsWidth",bubbles:!0}))}onSegmentChange(t){"width"===t.detail&&this.updateSegmentsWidth()}onSlotChange(){this.updateSegmentsWidth()}propertyChangedCallback(t){switch(t){case"title":this.updateTitle();case"width":this.updateWidth(),this.updateSlope(),this.dispatchEvent(new CustomEvent("streetchange",{detail:"width",bubbles:!0}));break;case"elevation":this.updateElevation(),this.updateSlope(),this.dispatchEvent(new CustomEvent("streetchange",{detail:"elevation",bubbles:!0}));break;case"slopeHeight":case"slopeDirection":this.updateSlope(),this.updateElevation(),this.dispatchEvent(new CustomEvent("streetchange",{detail:"slope",bubbles:!0}))}}updateText(){let t=this.width.toFixed(1)+"m";this.slopeDirection!==e.UdSlopeDirection.None&&this.slopeHeight>0&&this.elevation&&(t+=" "+Math.round(e.Utils.calculateSlopeHeight(this.elevation,this.slopeHeight,this.slopeDirection)/this.width*100)+"%"),__classPrivateFieldGet(this,n,"f").widthText.element.innerText=t}updateTitle(){__classPrivateFieldGet(this,n,"f").title.element.innerText=this.title}updateWidth(){__classPrivateFieldGet(this,n,"f").root.element.style.width=this.width*e.SCALE.meterToPixels+"px",this.updateText()}updateElevation(){__classPrivateFieldGet(this,n,"f").base.element.style.height=e.Utils.calculateElevation(this.elevation,this.slopeHeight,this.slopeDirection)*e.SCALE.meterToPixels+"px"}updateSlope(){if(this.slopeDirection===e.UdSlopeDirection.None||0===this.slopeHeight)return __classPrivateFieldGet(this,n,"f").slope.element.style.display="none",void __classPrivateFieldGet(this,n,"f").base.element.classList.add("sr__ground--border");__classPrivateFieldGet(this,n,"f").slope.element.style.display="",__classPrivateFieldGet(this,n,"f").base.element.classList.remove("sr__ground--border");const i=(this.width*e.SCALE.meterToPixels).toFixed(),c=e.Utils.calculateSlopeHeight(this.elevation,this.slopeHeight,this.slopeDirection)*e.SCALE.meterToPixels,m=(c+e.SCALE.surfaceBorderWidth).toFixed(),f=c.toFixed(),g=(c+10).toFixed();__classPrivateFieldGet(this,n,"f").slope.element.children[0].setAttribute("viewBox",`0 0 ${i} ${m}`),__classPrivateFieldGet(this,n,"f").slope.element.children[0].setAttribute("width",i),__classPrivateFieldGet(this,n,"f").slope.element.children[0].setAttribute("height",m);const l=this.slopeDirection===e.UdSlopeDirection.ToRight,r=l?`M0,${f} L${i},0 V${g} H0 Z`:`M${i},${f} L0,0 V${g} H${i} Z`;__classPrivateFieldGet(this,n,"f").slope.element.children[0].children[0].setAttribute("d",r),__classPrivateFieldGet(this,n,"f").slope.element.children[0].children[1].setAttribute("d",r);const h=Math.atan2(this.slopeHeight,this.width)+Math.PI/2,d=Math.sin(h)*e.SCALE.surfaceBorderWidth,p=Math.cos(h)*(l?-e.SCALE.surfaceBorderWidth:e.SCALE.surfaceBorderWidth);__classPrivateFieldGet(this,n,"f").slope.element.children[0].children[1].setAttribute("transform",`translate(${p.toFixed(3)} ${d.toFixed(3)})`),this.updateText()}render(){const t=e.ceRef("div",__classPrivateFieldGet(this,n,"f").root,{className:"street"},e.ceRef("div",__classPrivateFieldGet(this,n,"f").title,{className:"st__title"},this.title),e.ce("div",{className:"surface"},e.ceRef("div",__classPrivateFieldGet(this,n,"f").slope,{className:"sr__slope",part:"slope",style:{display:"none"}},e.ce("svg",{svg:!0,preserveAspectRatio:"none"},e.ce("path",{svg:!0,class:"sr__slope__border"}),e.ce("path",{svg:!0,class:"sr__slope__ground"}))),e.ceRef("div",__classPrivateFieldGet(this,n,"f").base,{className:"sr__ground sr__ground--border",part:"ground"}),e.ce("div",{className:"sr__scale"},e.ce("div",{className:"width-grid"}),e.ceRef("div",__classPrivateFieldGet(this,n,"f").widthText,{className:"width-display"}))),e.ce("div",{className:"st__content"},e.ce("slot",{name:"street"})));this.updateWidth(),this.updateSlope(),this.updateElevation(),this.shadowRoot.addEventListener("segmentchange",this.onSegmentChange.bind(this)),this.shadowRoot.addEventListener("slotchange",this.onSlotChange.bind(this)),t.addEventListener("mouseenter",()=>this.dispatchEvent(new CustomEvent("streetfocus",{bubbles:!0}))),t.addEventListener("mouseleave",()=>this.dispatchEvent(new CustomEvent("streetblur",{bubbles:!0}))),new e.DragEvents(this,"street"),this.shadowRoot.appendChild(t)}}a=new WeakMap,n=new WeakMap,__decorate([e.attributeProperty()],o.prototype,"title",void 0),__decorate([e.attributeProperty()],o.prototype,"width",void 0),__decorate([e.attributeProperty(e.Utils.inRange.bind(null,[0,10]))],o.prototype,"elevation",void 0),__decorate([e.attributeProperty(e.Utils.inEnum.bind(null,e.UdSlopeDirection))],o.prototype,"slopeDirection",void 0),__decorate([e.attributeProperty(e.Utils.inRange.bind(null,[0,10]))],o.prototype,"slopeHeight",void 0),e.UdStreet=o,e.defineElement("street",o)}(ud||(ud={})),function(e){e.defineElement("canvas-ui",class a extends e.BaseElement{createMenuItem(o){var s;return e.ce("div",{className:"ui-mbi__item ui-btn"},e.ce("img",{src:e.getAssetSrc(null!==(s=o.img)&&void 0!==s?s:o.key)}),e.SEGMENT_TYPES[o.key].title)}createMenu(o,s){const t=s.map(c=>this.createMenuItem(c)),i=e.ce("div",{className:"ui-menu-btn"},e.ce("button",{className:"ui-btn"},o,e.ce("img",{src:e.getUiSrc("dropdown")})),e.ce("div",{className:"ui-menu-btn-items"},...t));i.addEventListener("mouseenter",()=>i.classList.add("expand")),i.addEventListener("mouseleave",()=>i.classList.remove("expand"));for(let c=0;c<s.length;c++)t[c].addEventListener("mousedown",()=>{i.classList.remove("expand"),this.dispatchEvent(new CustomEvent("addsegment",{detail:{key:s[c].key}}))});return i}render(){const o={btnAddStreet:e.cr()},s=e.ce("div",{className:"ui-create-tools"},e.ce("div",{className:"ui-menu-btn"},e.ceRef("button",o.btnAddStreet,{className:"ui-btn"},"Street")),this.createMenu("Road",[{key:"drive",img:"drive-f"},{key:"bike",img:"bike-f"},{key:"bus",img:"bus-f"}]),this.createMenu("Transport",[{key:"lightrail",img:"lightrail-f"},{key:"streetcar",img:"streetcar-f"},{key:"transitshelter",img:"transitshelter-f"}]),this.createMenu("Features",[{key:"lamp"}]),this.createMenu("Landscape",[{key:"plantingstrip-flower"},{key:"plantingstrip-grass"},{key:"sidewalk"},{key:"tree"}]));o.btnAddStreet.element.addEventListener("click",()=>this.dispatchEvent(new CustomEvent("addstreet"))),this.shadowRoot.appendChild(s)}})}(ud||(ud={})),function(e){var a;class n extends e.UiBaseToolElement{constructor(){super(560),a.set(this,{title:e.cr(),slope:e.cr(),facingDirection:e.cr(),direction:e.cr()})}showTool(){const s=e.SEGMENT_TYPES[this.activeElement.type];__classPrivateFieldGet(this,a,"f").title.element.innerText=s?.title||"Empty";const t=s?.hideUiOptions;__classPrivateFieldGet(this,a,"f").facingDirection.element.style.display=s?.noDirection?"none":"",__classPrivateFieldGet(this,a,"f").slope.element.style.display=t?.slope?"none":"",__classPrivateFieldGet(this,a,"f").direction.element.style.display=t?.direction?"none":""}renderTool(){const s=["default","concrete","a","b","c","d","e"],t={btnWidthGrow:e.cr(),btnWidthShrink:e.cr(),btnRemove:e.cr(),btnElevationRaise:e.cr(),btnElevationLower:e.cr(),btnSlopeToRight:e.cr(),btnSlopeRemove:e.cr(),btnSlopeToLeft:e.cr(),btnSlopeRaise:e.cr(),btnSlopeLower:e.cr(),btnColors:e.crArr(),selPatterns:e.cr(),btnDirectionForward:e.cr(),btnDirectionBackward:e.cr(),btnDirectionS:e.cr(),btnDirectionL:e.cr(),btnDirectionR:e.cr(),btnDirectionSL:e.cr(),btnDirectionSR:e.cr(),btnDirectionLR:e.cr(),btnDirectionSLR:e.cr()},i=e.ce("div",{className:"ui-action-dialog ui-action-dialog--segment"},e.ce("div",{className:"ui-action-row ui-action-row--title"},e.ceRef("div",__classPrivateFieldGet(this,a,"f").title,{},"Title"),e.ce("div",{className:"ui-action-set",style:{marginLeft:"auto",flexGrow:"0"}},e.ce("div",{className:"ui-action-set-label"},"Remove"),e.ceRef("button",t.btnRemove,{className:"ui-btn-icon ui-btn-icon--large-icon ui-btn-icon--remove"},"\xd7"))),e.ce("div",{className:"ui-action-row"},e.ce("div",{className:"ui-action-set"},e.ce("div",{className:"ui-action-set-label"},"Width"),e.ce("div",{className:"ui-action-set-actions"},e.ceRef("button",t.btnWidthGrow,{className:"ui-btn-icon ui-btn-icon--large-icon"},"+"),e.ceRef("button",t.btnWidthShrink,{className:"ui-btn-icon ui-btn-icon--large-icon"},"\u2212"))),e.ce("div",{className:"ui-action-set"},e.ce("div",{className:"ui-action-set-label"},"Elevation"),e.ce("div",{className:"ui-action-set-actions"},e.ceRef("button",t.btnElevationRaise,{className:"ui-btn-icon"},"\u2b06"),e.ceRef("button",t.btnElevationLower,{className:"ui-btn-icon"},"\u2b07"))),e.ceRef("div",__classPrivateFieldGet(this,a,"f").slope,{className:"ui-action-set"},e.ce("div",{className:"ui-action-set-label"},"Slope"),e.ce("div",{className:"ui-action-set-actions"},e.ceRef("button",t.btnSlopeToRight,{className:"ui-btn-icon"},"\u25e2"),e.ceRef("button",t.btnSlopeRemove,{className:"ui-btn-icon"},"\u2583"),e.ceRef("button",t.btnSlopeToLeft,{className:"ui-btn-icon"},"\u25e3"),e.ce("div",{},"|"),e.ceRef("button",t.btnSlopeRaise,{className:"ui-btn-icon"},"\u2b06"),e.ceRef("button",t.btnSlopeLower,{className:"ui-btn-icon"},"\u2b07")))),e.ce("div",{className:"ui-action-row"},e.ce("div",{className:"ui-action-set"},e.ce("div",{className:"ui-action-set-label"},"Colour"),e.ce("div",{className:"ui-action-set-actions"},e.ceArrayRef("button",t.btnColors,{className:"ui-btn-icon ui-btn-icon--color color-default"}),e.ceArrayRef("button",t.btnColors,{className:"ui-btn-icon ui-btn-icon--color color-concrete"}),e.ceArrayRef("button",t.btnColors,{className:"ui-btn-icon ui-btn-icon--color color-a"}),e.ceArrayRef("button",t.btnColors,{className:"ui-btn-icon ui-btn-icon--color color-b"}),e.ceArrayRef("button",t.btnColors,{className:"ui-btn-icon ui-btn-icon--color color-c"}),e.ceArrayRef("button",t.btnColors,{className:"ui-btn-icon ui-btn-icon--color color-d"}),e.ceArrayRef("button",t.btnColors,{className:"ui-btn-icon ui-btn-icon--color color-e"}))),e.ce("div",{className:"ui-action-set"},e.ce("div",{className:"ui-action-set-label"},"Pattern"),e.ce("div",{className:"ui-action-set-actions"},e.ceRef("select",t.selPatterns,{className:"ui-select",style:{width:"120px"}})))),e.ceRef("div",__classPrivateFieldGet(this,a,"f").facingDirection,{className:"ui-action-row"},e.ce("div",{className:"ui-action-set"},e.ce("div",{className:"ui-action-set-label"},"Direction"),e.ce("div",{className:"ui-action-set-actions"},e.ceRef("button",t.btnDirectionForward,{className:"ui-btn-icon"},"\u2b07"),e.ceRef("button",t.btnDirectionBackward,{className:"ui-btn-icon"},"\u2b06")),e.ceRef("div",__classPrivateFieldGet(this,a,"f").direction,{className:"ui-action-set-actions"},e.ce("div",{},"|"),e.ceRef("button",t.btnDirectionS,{className:"ui-btn-icon ui-btn-icon--image"},e.ce("img",{src:e.getDirectionSrc(!1,e.UdSegmentDirection.Straight)})),e.ceRef("button",t.btnDirectionL,{className:"ui-btn-icon ui-btn-icon--image"},e.ce("img",{src:e.getDirectionSrc(!1,e.UdSegmentDirection.Left)})),e.ceRef("button",t.btnDirectionR,{className:"ui-btn-icon ui-btn-icon--image"},e.ce("img",{src:e.getDirectionSrc(!1,e.UdSegmentDirection.Right)})),e.ceRef("button",t.btnDirectionSL,{className:"ui-btn-icon ui-btn-icon--image"},e.ce("img",{src:e.getDirectionSrc(!1,e.UdSegmentDirection.StraightLeft)})),e.ceRef("button",t.btnDirectionSR,{className:"ui-btn-icon ui-btn-icon--image"},e.ce("img",{src:e.getDirectionSrc(!1,e.UdSegmentDirection.StraightRight)})),e.ceRef("button",t.btnDirectionLR,{className:"ui-btn-icon ui-btn-icon--image"},e.ce("img",{src:e.getDirectionSrc(!1,e.UdSegmentDirection.LeftRight)})),e.ceRef("button",t.btnDirectionSLR,{className:"ui-btn-icon ui-btn-icon--image"},e.ce("img",{src:e.getDirectionSrc(!1,e.UdSegmentDirection.StraightLeftRight)}))))));t.btnRemove.element.addEventListener("click",()=>this.activeElement.remove()),t.btnWidthGrow.element.addEventListener("click",()=>this.activeElement.width+=.2),t.btnWidthShrink.element.addEventListener("click",()=>this.activeElement.width-=.2),t.btnElevationRaise.element.addEventListener("click",()=>this.activeElement.elevation+=.1),t.btnElevationLower.element.addEventListener("click",()=>this.activeElement.elevation-=.1),t.btnSlopeToRight.element.addEventListener("click",()=>{this.activeElement.slopeDirection=e.UdSlopeDirection.ToRight,this.activeElement.slopeHeight||(this.activeElement.slopeHeight=.05)}),t.btnSlopeToLeft.element.addEventListener("click",()=>this.activeElement.slopeDirection=e.UdSlopeDirection.ToLeft),t.btnSlopeRemove.element.addEventListener("click",()=>{this.activeElement.slopeDirection=e.UdSlopeDirection.None,this.activeElement.slopeHeight||(this.activeElement.slopeHeight=.05)}),t.btnSlopeRaise.element.addEventListener("click",()=>this.activeElement.slopeHeight+=.05),t.btnSlopeLower.element.addEventListener("click",()=>this.activeElement.slopeHeight-=.05),t.btnColors.forEach((c,m)=>c.element.addEventListener("click",()=>this.activeElement.color=s[m])),t.btnDirectionForward.element.addEventListener("click",()=>this.activeElement.backward=!1),t.btnDirectionBackward.element.addEventListener("click",()=>this.activeElement.backward=!0),t.btnDirectionS.element.addEventListener("click",()=>this.activeElement.direction=e.UdSegmentDirection.Straight),t.btnDirectionL.element.addEventListener("click",()=>this.activeElement.direction=e.UdSegmentDirection.Left),t.btnDirectionR.element.addEventListener("click",()=>this.activeElement.direction=e.UdSegmentDirection.Right),t.btnDirectionSL.element.addEventListener("click",()=>this.activeElement.direction=e.UdSegmentDirection.StraightLeft),t.btnDirectionSR.element.addEventListener("click",()=>this.activeElement.direction=e.UdSegmentDirection.StraightRight),t.btnDirectionLR.element.addEventListener("click",()=>this.activeElement.direction=e.UdSegmentDirection.LeftRight),t.btnDirectionSLR.element.addEventListener("click",()=>this.activeElement.direction=e.UdSegmentDirection.StraightLeftRight),t.selPatterns.element.appendChild(e.ce("option",{value:""},"None"));for(let c of e.PATTERNS)t.selPatterns.element.appendChild(e.ce("option",{value:c},c));t.selPatterns.element.addEventListener("change",()=>this.activeElement.pattern=t.selPatterns.element.value),this.style.display="none",this.shadowRoot.appendChild(i)}}a=new WeakMap,e.UdSegmentUi=n,e.defineElement("segment-ui",n)}(ud||(ud={})),function(e){var a,n;class o extends e.UiBaseToolElement{constructor(){super(580),a.set(this,"Street"),this.editTitle=()=>{this.toggleTitle(!0),__classPrivateFieldGet(this,n,"f").inpTitle.element.value=this.activeElement.title,__classPrivateFieldGet(this,n,"f").inpTitle.element.focus()},this.acceptNewTitle=()=>{this.activeElement.title=__classPrivateFieldGet(this,n,"f").inpTitle.element.value||__classPrivateFieldGet(this,a,"f"),__classPrivateFieldGet(this,n,"f").title.element.innerText=this.activeElement.title,this.toggleTitle(!1)},this.cancelNewTitle=()=>{this.toggleTitle(!1)},n.set(this,{title:e.cr(),titleView:e.cr(),titleEditView:e.cr(),inpTitle:e.cr()})}toggleTitle(t){__classPrivateFieldGet(this,n,"f").titleView.element.style.display=t?"none":"",__classPrivateFieldGet(this,n,"f").titleEditView.element.style.display=t?"":"none"}showTool(){__classPrivateFieldGet(this,n,"f").title.element.innerText=this.activeElement.title,this.toggleTitle(!1)}renderTool(){const t=[8,12,18,20,24],i={selWidth:e.cr(),btnRemove:e.cr(),btnTitleEdit:e.cr(),btnTitleAccept:e.cr(),btnTitleCancel:e.cr(),btnElevationRaise:e.cr(),btnElevationLower:e.cr(),btnSlopeToRight:e.cr(),btnSlopeRemove:e.cr(),btnSlopeToLeft:e.cr(),btnSlopeRaise:e.cr(),btnSlopeLower:e.cr(),titleView:e.cr(),titleEditView:e.cr()},c=e.ce("div",{className:"ui-action-dialog ui-action-dialog--street"},e.ce("div",{className:"ui-action-row ui-action-row--title"},e.ceRef("div",__classPrivateFieldGet(this,n,"f").titleView,{className:"ui-action-set"},e.ceRef("div",__classPrivateFieldGet(this,n,"f").title,{},""),e.ceRef("button",i.btnTitleEdit,{className:"ui-btn-icon ui-btn-icon--large-icon"},"\u270e")),e.ceRef("div",__classPrivateFieldGet(this,n,"f").titleEditView,{className:"ui-action-set",style:{display:"none"}},e.ceRef("input",__classPrivateFieldGet(this,n,"f").inpTitle,{className:"ui-input ui-input--title",placeholder:__classPrivateFieldGet(this,a,"f")}),e.ceRef("button",i.btnTitleAccept,{className:"ui-btn-icon ui-btn-icon--large-icon"},"\u2713"),e.ceRef("button",i.btnTitleCancel,{className:"ui-btn-icon ui-btn-icon--large-icon ui-btn-icon--remove"},"\u2717")),e.ce("div",{className:"ui-action-set ui-action-set--no-grow"},e.ce("div",{className:"ui-action-set-label"},"Remove"),e.ceRef("button",i.btnRemove,{className:"ui-btn-icon ui-btn-icon--large-icon ui-btn-icon--remove"},"\xd7"))),e.ce("div",{className:"ui-action-row"},e.ce("div",{className:"ui-action-set"},e.ce("div",{className:"ui-action-set-label"},"Width"),e.ce("div",{className:"ui-action-set-actions"},e.ceRef("select",i.selWidth,{className:"ui-select",style:{width:"50px"}}))),e.ce("div",{className:"ui-action-set"},e.ce("div",{className:"ui-action-set-label"},"Elevation"),e.ce("div",{className:"ui-action-set-actions"},e.ceRef("button",i.btnElevationRaise,{className:"ui-btn-icon"},"\u2b06"),e.ceRef("button",i.btnElevationLower,{className:"ui-btn-icon"},"\u2b07"))),e.ce("div",{className:"ui-action-set"},e.ce("div",{className:"ui-action-set-label"},"Slope"),e.ce("div",{className:"ui-action-set-actions"},e.ceRef("button",i.btnSlopeToRight,{className:"ui-btn-icon"},"\u25e2"),e.ceRef("button",i.btnSlopeRemove,{className:"ui-btn-icon"},"\u2583"),e.ceRef("button",i.btnSlopeToLeft,{className:"ui-btn-icon"},"\u25e3"),e.ce("div",{},"|"),e.ceRef("button",i.btnSlopeRaise,{className:"ui-btn-icon"},"\u2b06"),e.ceRef("button",i.btnSlopeLower,{className:"ui-btn-icon"},"\u2b07")))));i.btnTitleEdit.element.addEventListener("click",this.editTitle),i.btnTitleAccept.element.addEventListener("click",this.acceptNewTitle),i.btnTitleCancel.element.addEventListener("click",this.cancelNewTitle),i.btnRemove.element.addEventListener("click",()=>this.activeElement.remove());for(let m of t)i.selWidth.element.appendChild(e.ce("option",{value:m},m.toString()));i.selWidth.element.addEventListener("change",()=>this.activeElement.width=+i.selWidth.element.value),i.btnElevationRaise.element.addEventListener("click",()=>this.activeElement.elevation+=.1),i.btnElevationLower.element.addEventListener("click",()=>this.activeElement.elevation-=.1),i.btnSlopeToRight.element.addEventListener("click",()=>{this.activeElement.slopeDirection=e.UdSlopeDirection.ToRight,this.activeElement.slopeHeight||(this.activeElement.slopeHeight=.05)}),i.btnSlopeToLeft.element.addEventListener("click",()=>this.activeElement.slopeDirection=e.UdSlopeDirection.ToLeft),i.btnSlopeRemove.element.addEventListener("click",()=>{this.activeElement.slopeDirection=e.UdSlopeDirection.None,this.activeElement.slopeHeight||(this.activeElement.slopeHeight=.05)}),i.btnSlopeRaise.element.addEventListener("click",()=>this.activeElement.slopeHeight+=.05),i.btnSlopeLower.element.addEventListener("click",()=>this.activeElement.slopeHeight-=.05),this.style.display="none",this.shadowRoot.appendChild(c)}}a=new WeakMap,n=new WeakMap,e.UdStreetUi=o,e.defineElement("street-ui",o)}(ud||(ud={})),function(e){var a,n,o,s,t,i;a=new WeakMap,n=new WeakMap,o=new WeakMap,s=new WeakMap,t=new WeakMap,i=new WeakMap,e.UdCanvasDrawings=class c{constructor(f,g){a.set(this,void 0),n.set(this,void 0),o.set(this,void 0),s.set(this,void 0),t.set(this,void 0),i.set(this,{height:700,bottomMargin:100,groundHeight:1}),__classPrivateFieldSet(this,a,f,"f"),__classPrivateFieldSet(this,n,g,"f"),__classPrivateFieldSet(this,o,__classPrivateFieldGet(this,n,"f").getContext("2d"),"f")}update(){__classPrivateFieldGet(this,n,"f").style.width=__classPrivateFieldGet(this,a,"f").contentWidth*e.SCALE.meterToPixels+"px",__classPrivateFieldGet(this,n,"f").style.height=__classPrivateFieldGet(this,i,"f").height+"px",__classPrivateFieldSet(this,t,__classPrivateFieldGet(this,n,"f").offsetWidth,"f"),__classPrivateFieldSet(this,s,__classPrivateFieldGet(this,n,"f").offsetHeight,"f"),__classPrivateFieldGet(this,n,"f").width=__classPrivateFieldGet(this,t,"f")*devicePixelRatio,__classPrivateFieldGet(this,n,"f").height=__classPrivateFieldGet(this,s,"f")*devicePixelRatio,__classPrivateFieldGet(this,n,"f").style.width=__classPrivateFieldGet(this,t,"f")+"px",__classPrivateFieldGet(this,n,"f").style.height=__classPrivateFieldGet(this,s,"f")+"px",__classPrivateFieldGet(this,o,"f").scale(devicePixelRatio,devicePixelRatio);const f=__classPrivateFieldGet(this,a,"f").outline||__classPrivateFieldGet(this,a,"f").separator;__classPrivateFieldGet(this,n,"f").style.display=f?"":"none",f&&__classPrivateFieldGet(this,a,"f").contentWidth&&(__classPrivateFieldGet(this,o,"f").clearRect(0,0,__classPrivateFieldGet(this,t,"f"),__classPrivateFieldGet(this,s,"f")),__classPrivateFieldGet(this,a,"f").outline&&this.renderOutline(__classPrivateFieldGet(this,s,"f"),__classPrivateFieldGet(this,t,"f")),__classPrivateFieldGet(this,a,"f").separator&&this.renderSeparator(__classPrivateFieldGet(this,s,"f"),__classPrivateFieldGet(this,t,"f")),!__classPrivateFieldGet(this,a,"f").hideElevationProfile&&__classPrivateFieldGet(this,a,"f").elevationProfileData&&this.renderElevationProfile(__classPrivateFieldGet(this,s,"f"),__classPrivateFieldGet(this,t,"f"),__classPrivateFieldGet(this,a,"f").contentWidth,__classPrivateFieldGet(this,a,"f").elevationProfileData,__classPrivateFieldGet(this,a,"f").elevation,__classPrivateFieldGet(this,a,"f").mirrored))}renderOutline(f,g){const l=[];let r=0;l[r]={xOffset:0,segments:[]};for(const v of __classPrivateFieldGet(this,a,"f").children)if(v instanceof e.UdStreet){const u=(v.width-v.segmentsWidth)/2;0!==u&&(r+=1,l[r]={xOffset:u,segments:[]});for(const b of v.children)b instanceof e.UdSegment&&l[r].segments.push(b);0!==u&&(r+=1,l[r]={xOffset:u,segments:[]})}else v instanceof e.UdSegment&&l[r].segments.push(v);if(!l[0].segments.length)return;const h=[];for(let v=0;v<l.length;v++){const u=l[v];h[v]={xOffset:u.xOffset,segments:[]};for(const b of u.segments)if(b.slopeHeight){const E=e.Utils.calculateElevation(b.elevation,b.slopeHeight,b.slopeDirection),y=b.slopeDirection===e.UdSlopeDirection.ToRight;h[v].segments.push({width:b.width,yStart:y?E:b.elevation,yEnd:y?b.elevation:E})}else h[v].segments.push({width:b.width,yStart:b.elevation,yEnd:b.elevation})}__classPrivateFieldGet(this,o,"f").save();let d=0;const p=f-__classPrivateFieldGet(this,i,"f").bottomMargin-__classPrivateFieldGet(this,i,"f").groundHeight*e.SCALE.meterToPixels;__classPrivateFieldGet(this,o,"f").lineWidth=4,__classPrivateFieldGet(this,o,"f").strokeStyle=e.COLOURS.outline,__classPrivateFieldGet(this,o,"f").beginPath();for(const v of h){d+=v.xOffset*e.SCALE.meterToPixels;for(let u=0;u<v.segments.length;u++){const b=v.segments[u],E=v.segments[u+1];0===u&&__classPrivateFieldGet(this,o,"f").moveTo(d,p-b.yStart*e.SCALE.meterToPixels),d+=b.width*e.SCALE.meterToPixels,__classPrivateFieldGet(this,o,"f").lineTo(d,p-b.yEnd*e.SCALE.meterToPixels),E&&__classPrivateFieldGet(this,o,"f").lineTo(d,p-E.yStart*e.SCALE.meterToPixels)}}__classPrivateFieldGet(this,o,"f").stroke(),__classPrivateFieldGet(this,o,"f").restore()}renderSeparator(f,g){const l=[];let r=0;const h=Array.from(__classPrivateFieldGet(this,a,"f").children);for(let p=0;p<h.length-1;p++){const v=h[p],u=h[p+1];r+=v.width,(v instanceof e.UdSegment&&u instanceof e.UdStreet||v instanceof e.UdStreet&&u instanceof e.UdSegment||v instanceof e.UdStreet&&u instanceof e.UdStreet)&&l.push(r)}__classPrivateFieldGet(this,o,"f").save(),__classPrivateFieldGet(this,o,"f").setLineDash([6,4]),__classPrivateFieldGet(this,o,"f").lineWidth=2,__classPrivateFieldGet(this,o,"f").strokeStyle=e.COLOURS.separator,__classPrivateFieldGet(this,o,"f").beginPath();const d=f-__classPrivateFieldGet(this,i,"f").bottomMargin;__classPrivateFieldGet(this,o,"f").moveTo(1.5,0),__classPrivateFieldGet(this,o,"f").lineTo(1.5,d);for(const p of l)__classPrivateFieldGet(this,o,"f").moveTo(p*e.SCALE.meterToPixels,0),__classPrivateFieldGet(this,o,"f").lineTo(p*e.SCALE.meterToPixels,d);__classPrivateFieldGet(this,o,"f").moveTo(g-1.5,0),__classPrivateFieldGet(this,o,"f").lineTo(g-1.5,d),__classPrivateFieldGet(this,o,"f").stroke(),__classPrivateFieldGet(this,o,"f").restore()}renderElevationProfile(f,g,l,r,h,d){__classPrivateFieldGet(this,o,"f").save(),__classPrivateFieldGet(this,o,"f").lineWidth=3,__classPrivateFieldGet(this,o,"f").strokeStyle="red",__classPrivateFieldGet(this,o,"f").beginPath();const v=2*r.distance,u=e.Utils.fitRange(v,r.ys.length,r.distance-l/2),b=e.Utils.fitRange(v,r.ys.length,l),E=g-1,y=f-__classPrivateFieldGet(this,i,"f").bottomMargin-__classPrivateFieldGet(this,i,"f").groundHeight*e.SCALE.meterToPixels;for(let S=0;S<g;S+=1){const T=e.Utils.fitRangeWithOffset(0,E,u,b,S),w=r.cubicSpline.at(T)-h,_=d?g-S:S;0===S?__classPrivateFieldGet(this,o,"f").moveTo(_,y-w*e.SCALE.meterToPixels):__classPrivateFieldGet(this,o,"f").lineTo(_,y-w*e.SCALE.meterToPixels)}__classPrivateFieldGet(this,o,"f").stroke(),__classPrivateFieldGet(this,o,"f").restore()}}}(ud||(ud={})),function(e){var a;a=new WeakMap,e.UdCanvasJSON=class n{constructor(s,t){a.set(this,void 0),__classPrivateFieldSet(this,a,s,"f")}getProperties(s){const t=s.constructor[e.AttributePropertiesSymbol].get(s.constructor).reduce((i,c)=>(i[c.propertyKey]=s[c.propertyKey],i),{});return t.slot=s.slot,t}getElJSON(s){return{tagName:s.tagName,props:this.getProperties(s),children:s.children.length?Array.from(s.children).map(t=>this.getElJSON(t)):void 0}}createObjHTML(s){const t=document.createElement(s.tagName);for(const i in s.props)t[i]=s.props[i];if(s.children)for(const i of s.children)t.appendChild(this.createObjHTML(i));return t}getJSON(){return{canvas:this.getElJSON(__classPrivateFieldGet(this,a,"f"))}}loadJSON(s){if(__classPrivateFieldGet(this,a,"f").innerHTML="",s.canvas.children)for(const t of s.canvas.children)__classPrivateFieldGet(this,a,"f").appendChild(this.createObjHTML(t))}}}(ud||(ud={}));